{"ast":null,"code":"import _slicedToArray from \"/Users/lairdkruger/Documents/Web Development/React Experiments/r3f-scroll-rig/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/lairdkruger/Documents/Web Development/React Experiments/r3f-scroll-rig/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/Users/lairdkruger/Documents/Web Development/React Experiments/r3f-scroll-rig/src/components/media/ImagePlane.js\";\nimport React, { useRef, Suspense } from 'react';\nimport * as THREE from 'three';\nimport './materials/ImageMaterial';\nimport state from '../../store';\nimport { useFrame, useLoader } from 'react-three-fiber';\nimport lerp from 'lerp';\nimport { useBlock } from '../Blocks'; // A 3D plane representing an HTML image element with CSS positioning\n\nfunction ImagePlane(_ref) {\n  let _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'white' : _ref$color,\n      src = _ref.src,\n      props = _objectWithoutProperties(_ref, [\"color\", \"src\"]);\n\n  const textures = useLoader(TextureLoader, state.images);\n\n  const _textures$map = textures.map(texture => (texture.minFilter = LinearFilter, texture)),\n        _textures$map2 = _slicedToArray(_textures$map, 3),\n        img1 = _textures$map2[0],\n        img2 = _textures$map2[1],\n        img3 = _textures$map2[2];\n\n  console.log(src);\n  const map = useLoader(THREE.TextureLoader, src);\n\n  const _useBlock = useBlock(),\n        viewportHeight = _useBlock.viewportHeight,\n        offsetFactor = _useBlock.offsetFactor;\n\n  const material = useRef();\n  let last = state.top.current;\n  useFrame(() => {\n    const pages = state.pages,\n          top = state.top;\n    material.current.scale = lerp(material.current.scale, offsetFactor - top.current / ((pages - 1) * viewportHeight), 0.1);\n    material.current.shift = lerp(material.current.shift, (top.current - last) / 150, 0.1);\n    last = top.current;\n  });\n  return /*#__PURE__*/React.createElement(Suspense, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"mesh\", Object.assign({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"planeBufferGeometry\", {\n    attach: \"geometry\",\n    args: [1, 1, 32, 32],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"customMaterial\", {\n    ref: material,\n    attach: \"material\",\n    color: color,\n    map: map,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default ImagePlane;","map":{"version":3,"sources":["/Users/lairdkruger/Documents/Web Development/React Experiments/r3f-scroll-rig/src/components/media/ImagePlane.js"],"names":["React","useRef","Suspense","THREE","state","useFrame","useLoader","lerp","useBlock","ImagePlane","color","src","props","textures","TextureLoader","images","map","texture","minFilter","LinearFilter","img1","img2","img3","console","log","viewportHeight","offsetFactor","material","last","top","current","pages","scale","shift"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,QAAxB,QAAwC,OAAxC;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AACA,OAAO,2BAAP;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,mBAApC;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,SAASC,QAAT,QAAyB,WAAzB,C,CAEA;;AAEA,SAASC,UAAT,OAAwD;AAAA,wBAAlCC,KAAkC;AAAA,MAAlCA,KAAkC,2BAA1B,OAA0B;AAAA,MAAjBC,GAAiB,QAAjBA,GAAiB;AAAA,MAATC,KAAS;;AACtD,QAAMC,QAAQ,GAAGP,SAAS,CAACQ,aAAD,EAAgBV,KAAK,CAACW,MAAtB,CAA1B;;AADsD,wBAE3BF,QAAQ,CAACG,GAAT,CAAcC,OAAD,KAAeA,OAAO,CAACC,SAAR,GAAoBC,YAArB,EAAoCF,OAAlD,CAAb,CAF2B;AAAA;AAAA,QAE/CG,IAF+C;AAAA,QAEzCC,IAFyC;AAAA,QAEnCC,IAFmC;;AAGtDC,EAAAA,OAAO,CAACC,GAAR,CAAYb,GAAZ;AACA,QAAMK,GAAG,GAAGV,SAAS,CAACH,KAAK,CAACW,aAAP,EAAsBH,GAAtB,CAArB;;AAJsD,oBAMbH,QAAQ,EANK;AAAA,QAM9CiB,cAN8C,aAM9CA,cAN8C;AAAA,QAM9BC,YAN8B,aAM9BA,YAN8B;;AAOtD,QAAMC,QAAQ,GAAG1B,MAAM,EAAvB;AACA,MAAI2B,IAAI,GAAGxB,KAAK,CAACyB,GAAN,CAAUC,OAArB;AACAzB,EAAAA,QAAQ,CAAC,MAAM;AAAA,UACL0B,KADK,GACU3B,KADV,CACL2B,KADK;AAAA,UACEF,GADF,GACUzB,KADV,CACEyB,GADF;AAEbF,IAAAA,QAAQ,CAACG,OAAT,CAAiBE,KAAjB,GAAyBzB,IAAI,CAACoB,QAAQ,CAACG,OAAT,CAAiBE,KAAlB,EAAyBN,YAAY,GAAGG,GAAG,CAACC,OAAJ,IAAe,CAACC,KAAK,GAAG,CAAT,IAAcN,cAA7B,CAAxC,EAAsF,GAAtF,CAA7B;AACAE,IAAAA,QAAQ,CAACG,OAAT,CAAiBG,KAAjB,GAAyB1B,IAAI,CAACoB,QAAQ,CAACG,OAAT,CAAiBG,KAAlB,EAAyB,CAACJ,GAAG,CAACC,OAAJ,GAAcF,IAAf,IAAuB,GAAhD,EAAqD,GAArD,CAA7B;AACAA,IAAAA,IAAI,GAAGC,GAAG,CAACC,OAAX;AACD,GALO,CAAR;AAMA,sBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,8CAAUlB,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACE;AAAqB,IAAA,MAAM,EAAC,UAA5B;AAAuC,IAAA,IAAI,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,EAAW,EAAX,CAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAgB,IAAA,GAAG,EAAEe,QAArB;AAA+B,IAAA,MAAM,EAAC,UAAtC;AAAiD,IAAA,KAAK,EAAEjB,KAAxD;AAA+D,IAAA,GAAG,EAAEM,GAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,CADF;AAQD;;AAED,eAAeP,UAAf","sourcesContent":["import React, { useRef, Suspense } from 'react'\nimport * as THREE from 'three'\nimport './materials/ImageMaterial'\nimport state from '../../store'\nimport { useFrame, useLoader } from 'react-three-fiber'\nimport lerp from 'lerp'\nimport { useBlock } from '../Blocks'\n\n// A 3D plane representing an HTML image element with CSS positioning\n\nfunction ImagePlane({ color = 'white', src, ...props }) {\n  const textures = useLoader(TextureLoader, state.images)\n  const [img1, img2, img3] = textures.map((texture) => ((texture.minFilter = LinearFilter), texture))\n  console.log(src)\n  const map = useLoader(THREE.TextureLoader, src)\n\n  const { viewportHeight, offsetFactor } = useBlock()\n  const material = useRef()\n  let last = state.top.current\n  useFrame(() => {\n    const { pages, top } = state\n    material.current.scale = lerp(material.current.scale, offsetFactor - top.current / ((pages - 1) * viewportHeight), 0.1)\n    material.current.shift = lerp(material.current.shift, (top.current - last) / 150, 0.1)\n    last = top.current\n  })\n  return (\n    <Suspense>\n      <mesh {...props}>\n        <planeBufferGeometry attach=\"geometry\" args={[1, 1, 32, 32]} />\n        <customMaterial ref={material} attach=\"material\" color={color} map={map} />\n      </mesh>\n    </Suspense>\n  )\n}\n\nexport default ImagePlane\n"]},"metadata":{},"sourceType":"module"}