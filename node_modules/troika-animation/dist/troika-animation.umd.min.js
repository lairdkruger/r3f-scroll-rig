'use strict';(function(f,m){"object"===typeof exports&&"undefined"!==typeof module?m(exports):"function"===typeof define&&define.amd?define(["exports"],m):(f=f||self,m(f.troika_animation={}))})(this,function(f){function m(a,b){return function(c){return.5>c?.5*a(2*c):.5*b(2*c-1)+.5}}function t(a){return function(b){return k(b,a)}}function u(a){return function(b){return 1-k(1-b,a)}}function v(a){return function(b){return.5>b?.5*k(2*b,a):.5*(1-k(1-(2*b-1),a))+.5}}function r(a,b,c){return a+(b-a)*c}function N(a,
b){return a.totalElapsed-b.totalElapsed}function O(){}function P(a){return a.runner$running}function Q(a){return!a.runner$stopped}function R(){var a=Date.now();n=null;w&&(p=p.filter(P),w=!1);if(p.length){for(var b=p.length;0<b--;)p[b]._tick(a);y()}}function y(){n||(n=x.requestAnimationFrame(R))}var k=Math.pow,z=Math.PI,D=Math.sqrt,E=z/2,S=2*z,q=t(2),A=u(2),d=v(2),T=t(3),U=u(3),V=v(3),W=t(4),X=u(4),Y=v(4),Z=t(5),aa=u(5),ba=v(5),F=function(a){return 1-D(1-a*a)},G=function(a){return D(1-k(a-1,2))},ca=
m(F,G),H=function(a){return 0===a||1===a?a:1-B(1-a)},B=function(a){return 0===a||1===a?a:Math.pow(2,-10*a)*Math.sin((a-.075)*S/.3)+1},da=m(H,B),I=function(a){return 1-C(1-a)},C=function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},ea=m(I,C),J=Object.freeze({__proto__:null,linear:function(a){return a},easeInQuad:q,easeOutQuad:A,easeInOutQuad:d,easeInCubic:T,easeOutCubic:U,easeInOutCubic:V,easeInQuart:W,
easeOutQuart:X,easeInOutQuart:Y,easeInQuint:Z,easeOutQuint:aa,easeInOutQuint:ba,easeInSine:function(a){return 1-Math.cos(a*E)},easeOutSine:function(a){return Math.sin(a*E)},easeInOutSine:function(a){return-.5*(Math.cos(z*a)-1)},easeInExpo:function(a){return 0===a?0:k(2,10*(a-1))},easeOutExpo:function(a){return 1===a?1:1-k(2,-10*a)},easeInOutExpo:function(a){return 0===a||1===a?a:.5>a?.5*k(2,10*(2*a-1)):.5*(1-k(2,-10*(2*a-1)))+.5},easeInCirc:F,easeOutCirc:G,easeInOutCirc:ca,easeInElastic:H,easeOutElastic:B,
easeInOutElastic:da,easeInBack:function(a){return a*a*(2.70158*a-1.70158)},easeOutBack:function(a){return--a*a*(2.70158*a+1.70158)+1},easeInOutBack:function(a){return 1>(a*=2)?.5*a*a*(3.5949095*a-2.5949095):.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)},easeInBounce:I,easeOutBounce:C,easeInOutBounce:ea}),K=function(){var a,b,c=Object.create(null),g=0;return function(e){if("number"===typeof e)return e;if("string"===typeof e){if(e in c)return c[e];a||(a=document.createElement("canvas"),b=a.getContext("2d"));
a.width=a.height=1;b.fillStyle=e;b.fillRect(0,0,1,1);var l=b.getImageData(0,0,1,1).data;l=l[0]<<16^l[1]<<8^l[2];2048<g&&(c=Object.create(null),g=0);c[e]=l;g++;return l}return e&&e.isColor?e.getHex():0}}(),L=Object.freeze({__proto__:null,number:r,color:function(a,b,c){a=K(a);b=K(b);var g=r(a>>16&255,b>>16&255,c),e=r(a>>8&255,b>>8&255,c);a=r(a&255,b&255,c);return g<<16^e<<8^a}}),M=function(a){return a};q=function(a,b,c,g,e,l,h,f,d){void 0===g&&(g=750);void 0===e&&(e=0);void 0===l&&(l=M);void 0===h&&
(h=1);void 0===f&&(f="forward");void 0===d&&(d="number");this.callback=a;this.fromValue=b;this.toValue=c;this.duration=g;this.delay=e;this.easing="string"===typeof l?J[l]||M:l;this.iterations=h;this.direction=f;this.interpolate="function"===typeof d?d:L[d]||r;this.totalElapsed=9007199254740991>this.iterations?this.delay+this.duration*this.iterations:9007199254740991};q.prototype.gotoElapsedTime=function(a){var b=this.duration,c=this.delay;if(a>=c){a=Math.min(a,this.totalElapsed)-c;c=a%b/b;0===c&&
0!==a&&(c=1);c=this.easing(c);if("reverse"===this.direction||"alternate"===this.direction&&0===Math.ceil(a/b)%2)c=1-c;this.callback(this.interpolate(this.fromValue,this.toValue,c))}};q.prototype.gotoEnd=function(){this.gotoElapsedTime(this.totalElapsed)};A=function(a){function b(b,g,e,d,h,f){"number"!==typeof g&&(g=b.reduce(function(a,b){return Math.max(a,b.totalElapsed)},0));Infinity===g&&(g=Number.MAX_VALUE);a.call(this,null,0,g,g,e,d,h,f);1===b.length?this.callback=b[0].gotoElapsedTime.bind(b[0]):
(b.sort(N),this.callback=this._syncTweens);this.tweens=b}a&&(b.__proto__=a);b.prototype=Object.create(a&&a.prototype);b.prototype.constructor=b;b.prototype._syncTweens=function(a){for(var b=0,c=this.tweens.length;b<c;b++)this.tweens[b].gotoElapsedTime(a)};return b}(q);var p=[],n=null,w=!1,x=window;d=function(){this.tweens=[]};d.prototype.destructor=function(){this.tweens=null;this.runner$running=!1;w=!0;this.start=this.stop=this.pause=this._tick=O};d.prototype.start=function(a){a.runner$paused&&a.runner$started?
a.runner$started+=Date.now()-a.runner$paused:this.tweens.push(a);a.runner$paused=null;a.runner$stopped=!1;this.runner$running||(this.runner$running=!0,p.push(this),y())};d.prototype.stop=function(a){a.runner$stopped=!0;a.runner$paused=null};d.prototype.pause=function(a){a.runner$paused||(a.runner$paused=Date.now())};d.prototype.stopAll=function(){this.tweens&&this.tweens.forEach(this.stop,this)};d.prototype._tick=function(a){for(var b=this.tweens,c=!1,d=!1,e=0,f=b.length;e<f;e++){var h=b[e];if(!h.runner$stopped&&
!h.runner$paused){var k=a-(h.runner$started||(h.runner$started=a));h.gotoElapsedTime(k);d=!0;if(k>h.totalElapsed&&(this.stop(h),h.onDone))h.onDone()}h.runner$stopped&&(c=!0)}if(d)this.onTick();if(c&&(this.tweens=b.filter(Q),!this.tweens.length&&(this.runner$running=!1,w=!0,this.onDone)))this.onDone()};d.prototype.onTick=function(){};d.prototype.onDone=function(){};f.Easings=J;f.Interpolators=L;f.MultiTween=A;f.Runner=d;f.Tween=q;f.setAnimationScheduler=function(a){a=a||window;a!==x&&(n&&(x.cancelAnimationFrame(n),
n=null),x=a,y())};Object.defineProperty(f,"__esModule",{value:!0})})
